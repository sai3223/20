<!doctype html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=AW-17599459487"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'AW-17599459487');
</script>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Contact / Form Submission Demo</title>
  <style>
    :root{--bg:#f6f7fb;--card:#ffffff;--accent:#0b66ff;--muted:#6b7280}
    *{box-sizing:border-box}
    body{font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; margin:0;background:var(--bg);color:#111}
    .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:32px}
    .card{width:100%;max-width:820px;background:var(--card);border-radius:12px;box-shadow:0 6px 20px rgba(16,24,40,0.08);padding:28px}
    h1{margin:0 0 8px;font-size:20px}
    p.lead{margin:0 0 20px;color:var(--muted)}
    .grid{display:grid;grid-template-columns:1fr 320px;gap:20px}
    form{display:flex;flex-direction:column;gap:12px}
    label{font-size:13px;color:var(--muted);display:block;margin-bottom:6px}
    input[type=text],input[type=email],textarea,input[type=tel],select{width:100%;padding:10px 12px;border-radius:8px;border:1px solid #e6e9ef;font-size:14px}
    textarea{min-height:140px;resize:vertical}
    .row{display:flex;gap:12px}
    .btn{display:inline-block;padding:10px 14px;border-radius:10px;border:0;background:var(--accent);color:#fff;font-weight:600;cursor:pointer}
    .btn.secondary{background:transparent;color:var(--accent);border:1px solid rgba(11,102,255,0.12)}
    .muted{color:var(--muted);font-size:13px}
    .meta{background:#fbfdff;padding:12px;border-radius:8px;border:1px solid #eef6ff}
    .submissions{margin-top:12px}
    .submission-item{padding:10px;border-radius:8px;background:#fff;border:1px solid #eef0f6;margin-bottom:8px}
    .hidden{display:none}
    @media(max-width:860px){.grid{grid-template-columns:1fr;}.card{padding:18px}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Contact / Form Submission</h1>
      <p class="lead">A simple accessible form that submits via JavaScript (fetch). A demo "Local mode" stores submissions in your browser if you don't have a backend.</p>

      <div class="grid">
        <div>
          <form id="contactForm" novalidate>
            <div>
              <label for="name">Full name</label>
              <input id="name" name="name" type="text" placeholder="Your full name" required />
            </div>

            <div>
              <label for="email">Email</label>
              <input id="email" name="email" type="email" placeholder="you@example.com" required />
            </div>

            <div>
              <label for="phone">Phone (optional)</label>
              <input id="phone" name="phone" type="tel" placeholder="+91 98765 43210" />
            </div>

            <div>
              <label for="subject">Subject</label>
              <input id="subject" name="subject" type="text" placeholder="Short subject" required />
            </div>

            <div>
              <label for="message">Message</label>
              <textarea id="message" name="message" placeholder="Write your message..." required></textarea>
            </div>

            <div>
              <label for="attachment">Attachment (optional)</label>
              <input id="attachment" name="attachment" type="file" accept="image/*,.pdf" />
            </div>

            <div class="row" style="margin-top:6px">
              <button class="btn" type="submit">Send message</button>
              <button class="btn secondary" id="clearBtn" type="button">Clear form</button>
            </div>

            <p class="muted" id="status" aria-live="polite"></p>
          </form>

          <div style="margin-top:14px">
            <label class="muted">Submission mode</label>
            <div style="display:flex;gap:8px;margin-top:8px">
              <button class="btn secondary" id="useLocal">Local demo</button>
              <button class="btn" id="useServer">POST to /submit</button>
            </div>
            <p class="muted" style="margin-top:8px">Local demo stores in your browser (no server). Server mode will POST JSON + file (multipart) to <code>/submit</code>.</p>
          </div>
        </div>

        <aside>
          <div class="meta">
            <strong>Preview / Saved submissions</strong>
            <div class="submissions" id="submissionsList">
              <p class="muted">No submissions yet.</p>
            </div>

            <div style="margin-top:10px">
              <button class="btn secondary" id="downloadAll">Download all (JSON)</button>
            </div>
          </div>
        </aside>
      </div>

    </div>
  </div>

  <script>
    // Simple client-side handler. Change SERVER_URL if you host an API.
    const form = document.getElementById('contactForm');
    const status = document.getElementById('status');
    const submissionsList = document.getElementById('submissionsList');
    const downloadAll = document.getElementById('downloadAll');
    const clearBtn = document.getElementById('clearBtn');
    const useLocal = document.getElementById('useLocal');
    const useServer = document.getElementById('useServer');

    let mode = localStorage.getItem('form_mode') || 'local';
    const SERVER_URL = '/submit'; // change to your endpoint

    function renderSubmissions(){
      const data = JSON.parse(localStorage.getItem('demo_submissions') || '[]');
      submissionsList.innerHTML = '';
      if(!data.length){ submissionsList.innerHTML = '<p class="muted">No submissions yet.</p>'; return }
      data.slice().reverse().forEach(s=>{
        const el = document.createElement('div'); el.className='submission-item';
        el.innerHTML = `<strong>${escapeHtml(s.name||'—')}</strong> <div class="muted">${new Date(s.created).toLocaleString()}</div><div style="margin-top:6px">${escapeHtml(s.subject||'')}</div><div style="margin-top:6px;font-size:13px;color:var(--muted)">${escapeHtml(s.message||'')}</div>`;
        submissionsList.appendChild(el);
      })
    }

    function escapeHtml(str){ if(!str) return ''; return String(str).replace(/[&<>"]+/g, c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[c])); }

    function setStatus(msg, isError){ status.textContent = msg; status.style.color = isError ? 'crimson' : 'inherit'; }

    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      setStatus('Validating...');
      if(!form.reportValidity()){ setStatus('Please complete required fields', true); return }

      const fd = new FormData(form);
      const payload = {
        name: fd.get('name'),
        email: fd.get('email'),
        phone: fd.get('phone'),
        subject: fd.get('subject'),
        message: fd.get('message'),
        created: new Date().toISOString()
      };

      // If local mode — store in localStorage
      if(mode === 'local'){
        const arr = JSON.parse(localStorage.getItem('demo_submissions')||'[]');
        arr.push(payload);
        localStorage.setItem('demo_submissions', JSON.stringify(arr));
        renderSubmissions();
        setStatus('Saved locally (demo mode).');
        form.reset();
        return;
      }

      // Server mode: POST multipart form-data so files are included
      try{
        setStatus('Sending to server...');
        const resp = await fetch(SERVER_URL, { method:'POST', body:fd });
        if(!resp.ok) throw new Error('Server returned '+resp.status);
        const json = await resp.json();
        setStatus('Server response: ' + (json.message || 'OK'));
        form.reset();
      }catch(err){
        setStatus('Failed to send: '+err.message, true);
      }
    });

    clearBtn.addEventListener('click', ()=>{ form.reset(); setStatus('Form cleared.'); });

    useLocal.addEventListener('click', ()=>{ mode='local'; localStorage.setItem('form_mode','local'); setStatus('Switched to local demo mode.'); });
    useServer.addEventListener('click', ()=>{ mode='server'; localStorage.setItem('form_mode','server'); setStatus('Switched to server POST mode (/submit).'); });

    downloadAll.addEventListener('click', ()=>{
      const data = JSON.parse(localStorage.getItem('demo_submissions')||'[]');
      const blob = new Blob([JSON.stringify(data, null, 2)], {type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = 'submissions.json'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    });

    // initialize
    renderSubmissions();
    setStatus(mode==='local' ? 'Demo: local mode' : 'Demo: server mode');

    // Optional: show basic client-side validation for phone (example)
    document.getElementById('phone').addEventListener('input', (e)=>{
      const v = e.target.value.replace(/[^0-9\+\-\s]/g,'');
      if(v !== e.target.value) e.target.value = v;
    });

  </script>

  <!--
    OPTIONAL: Simple Node/Express server snippet (save as server.js) — this is NOT required to run the HTML demo.

    const express = require('express');
    const multer = require('multer');
    const upload = multer({ dest: 'uploads/' });
    const app = express();
    app.post('/submit', upload.single('attachment'), (req, res) => {
      // req.body contains the fields (text inputs). req.file contains the uploaded file (if any)
      console.log('Received:', req.body, req.file && req.file.filename);
      return res.json({ ok: true, message: 'Received on server' });
    });
    app.listen(3000, ()=>console.log('Server listening on http://localhost:3000'));

    How to use:
    1) Save this HTML as `form.html` and open it in a browser — local demo mode works without a server.
    2) If you want server mode, run the Node server (npm i express multer) and change SERVER_URL to 'http://localhost:3000/submit'.
  -->
</body>
</html>
